(function(n){function r(t){n.chrome?.webview?.postMessage&&t.message?n.chrome.webview.postMessage(t):console.error("[window.chrome.webview.postMessage] is not supported in this environment.")}function u(t,i){n.dispatchEvent(new CustomEvent(t,{detail:i}))}function e(n){if(n.state!==undefined){const{state:i}=n,t=document.querySelector("html");i?(u("windowactivated",{}),t?.classList.add("window--activated"),t?.classList.remove("window--deactivated")):(u("windowdeactivate",{}),t?.classList.remove("window--activated"),t?.classList.add("window--deactivated"))}}function c(n){const{state:i}=n;if(i){u("windowstatechange",{state:i});const t=document.querySelector("html");t?.classList.remove("window--maximized","window--minimized","window--fullscreen");switch(i){case"maximized":t?.classList.add("window--maximized");break;case"minimized":t?.classList.add("window--minimized");break;case"fullscreen":t?.classList.add("window--fullscreen")}}}function l(n){const{x:t,y:i,width:r,height:f}=n;u("windowresize",{x:t,y:i,width:r,height:f})}function a(n){const{x:t,y:i,screenX:r,screenY:f}=n;u("windowmove",{x:t,y:i,screenX:r,screenY:f})}function o(){const t=document.querySelector("html");n.addEventListener("click",n=>{const t=n.button;if(t===0){let t=n.target;while(t&&!t.hasAttribute(f))t=t.parentElement;if(t){const n=t.getAttribute(f)?.toLowerCase();r({passcode:i,message:"FormedgeWindowCommand",command:n})}}});n.chrome?.webview?.addEventListener&&n.chrome.webview.addEventListener("message",n=>{const{passcode:t,message:r}=n.data;if(t===i)switch(r){case"FormedgeNotifyWindowStateChange":c(n.data);break;case"FormedgeNotifyWindowResize":l(n.data);break;case"FormedgeNotifyWindowMove":a(n.data);break;case"FormedgeNotifyWindowActivated":e(n.data)}});e({passcode:i,message:"FormedgeNotifyWindowActivated",state:!0});h?(t?.classList.add("window__titlbar--shown"),t?.classList.remove("window__titlbar--hidden")):(t?.classList.add("window__titlbar--hidden"),t?.classList.remove("window__titlbar--shown"))}function t(){if(n.chrome?.webview?.hostObjects?.sync?.hostWindow)return n.chrome?.webview?.hostObjects?.sync?.hostWindow}function v(){const n=t();n&&n.Minimize()}function y(){const n=t();n&&n.Maximize()}function p(){const n=t();n&&n.Restore()}function w(){const n=t();n&&n.Fullscreen()}function b(){const n=t();n&&n.ToggleFullscreen()}function k(){const n=t();n&&n.Close()}function d(){const n=t();n&&n.Activate()}function g(){const n=t();if(n)return n.Activated}function nt(){const n=t();if(n)return n.WindowState}function tt(){const n=t();if(n)return n.HasTitleBar}function rt(){const n=t();if(n)return n.FormedgeVersion}function ut(){const n=t();if(n)return n.ChromiumVersion}const f=`app-command`,i=`{{FORMEDGE_MESSAGE_PASSCODE}}`,s=`{{WINFORMEDGE_VERSION}}`,h=`{{HAS_TITLE_BAR}}`==="true";n.formedgeVersion=s;n.moveTo=(n,t)=>{r({passcode:i,message:"FormedgeWindowMoveTo",x:n,y:t})};n.resizeTo=(n,t)=>{r({passcode:i,message:"FormedgeWindowResizeTo",width:n,height:t})};n.moveBy=(n,t)=>{r({passcode:i,message:"FormedgeWindowMoveBy",dx:n,dy:t})};n.resizeBy=(n,t)=>{r({passcode:i,message:"FormedgeWindowResizeBy",dx:n,dy:t})};document.readyState==="loading"?n.addEventListener("load",()=>{o()}):o();class it{constructor(){setInterval(()=>{const t=hostWindow?.activated;if(t!==null&&t!==undefined){const n=document.querySelector("html");t?(n?.classList.add("window--activated"),n?.classList.remove("window--deactivated")):(n?.classList.remove("window--activated"),n?.classList.add("window--deactivated"))}},300)}get activated(){return g()}get hasTitleBar(){return tt()}get windowState(){return nt()}get left(){const n=t();return n?n.Left:0}set left(n){const i=t();i&&(i.Left=n)}get top(){const n=t();return n?n.Top:0}set top(n){const i=t();i&&(i.Top=n)}get width(){const n=t();return n?n.Width:0}set width(n){const i=t();i&&(i.Width=n)}get height(){const n=t();return n?n.Height:0}set height(n){const i=t();i&&(i.Height=n)}activate(){d()}minimize(){v()}maximize(){y()}restore(){p()}fullscreen(){w()}toggleFullscreen(){b()}close(){k()}}class ft{version={get Formedge(){return rt()},get Chromium(){return ut()}};}n.formedge=new ft;n.hostWindow=new it})(window);