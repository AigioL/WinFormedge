(function(n){function i(t){n.chrome?.webview?.postMessage&&t.message?n.chrome.webview.postMessage(t):console.error("[window.chrome.webview.postMessage] is not supported in this environment.")}function r(t,i){n.dispatchEvent(new Event(t,{detail:i}))}function o(n){if(n.state!==undefined){const{state:t}=n,i=document.querySelector("html");t?r("windowactivated",{}):r("windowdeactivate",{});i?.classList.toggle("window--activated",t);i?.classList.toggle("window--deactivated",!t)}}function h(n){const{state:t}=n;if(t){r("windowstatechange",{state:t});const i=document.querySelector("html");i?.classList.toggle("window--maximized",t==="maximized");i?.classList.toggle("window--minimized",t==="minimized");i?.classList.toggle("window--fullscreen",t==="fullscreen")}}function c(n){const{x:t,y:i,width:u,height:f}=n;r("windowresize",{x:t,y:i,width:u,height:f})}function l(n){const{x:t,y:i,screenX:u,screenY:f}=n;r("windowmove",{x:t,y:i,screenX:u,screenY:f})}const f=`app-command`,t=`{{FORMEDGE_MESSAGE_PASSCODE}}`,s=`{{WINFORMEDGE_VERSION}}`,e=`{{HAS_TITLE_BAR}}`==="true";n.formedgeVersion=s;n.moveTo=(n,r)=>{i({passcode:t,message:"FormedgeWindowMoveTo",x:n,y:r})};n.resizeTo=(n,r)=>{i({passcode:t,message:"FormedgeWindowResizeTo",width:n,height:r})};n.moveBy=(n,r)=>{i({passcode:t,message:"FormedgeWindowMoveBy",dx:n,dy:r})};n.resizeBy=(n,r)=>{i({passcode:t,message:"FormedgeWindowResizeBy",dx:n,dy:r})};n.addEventListener("load",()=>{const r=document.querySelector("html");n.addEventListener("click",n=>{const r=n.button;if(r===0){let r=n.target;while(r&&!r.hasAttribute(f))r=r.parentElement;if(r){const n=r.getAttribute(f)?.toLowerCase();i({passcode:t,message:"FormedgeWindowCommand",command:n})}}});n.chrome?.webview?.addEventListener&&n.chrome.webview.addEventListener("message",n=>{const{passcode:i,message:r}=n.data;if(i===t)switch(r){case"FormedgeNotifyWindowStateChange":h(n.data);break;case"FormedgeNotifyWindowResize":c(n.data);break;case"FormedgeNotifyWindowMove":l(n.data);break;case"FormedgeNotifyWindowActivated":o(n.data)}});o({passcode:t,message:"FormedgeNotifyWindowActivated",state:!0});r?.classList.toggle("window__titlbar--shown",e);r?.classList.toggle("window__titlbar--hidden",!e)});const u={minimize:async()=>{if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;await t.Minimize()}},maximize:async()=>{if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;await t.Maximize()}},restore:async()=>{if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;await t.Restore()}},fullscreen:async()=>{if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;await t.Fullscreen()}},toggleFullscreen:async()=>{if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;await t.ToggleFullscreen()}},close:async()=>{if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;await t.Close()}},activate:async()=>{if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;await t.Activate()}}};Object.defineProperty(u,"activated",{async get(){if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;return await t.Activated}}});Object.defineProperty(u,"hasTitleBar",{async get(){if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;return await t.HasTitleBar}}});Object.defineProperty(u,"windowState",{async get(){if(n.chrome?.webview?.hostObjects?.hostWindow){var t=n.chrome?.webview?.hostObjects?.hostWindow;return await t.WindowState}}});n.hostWindow=u})(window);